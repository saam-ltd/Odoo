<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

	<!-- New - Invoice Tree View Inherit -->
	<!-- <record model="ir.ui.view" id="view_out_invoice_tree_inherit_target">
		<field name="name">account.move.tree.inherit.target</field>
		<field name="model">account.move</field>
		<field eval="10" name="priority"/>
		<field name="arch" type="xml">
			<tree string="Invoice view - Target Tracking" create="false" edit="false">
				<field name="name"/>
				<field name="invoice_partner_display_name" string="Customer"/>
				<field name="invoice_date" string="Invoice Date"/>
				<field name="invoice_date_due"/>
				<field name="custom_salesperson_id"/>
				<field name="invoice_origin" optional="hide" string="Sale Order No"/>
				<field name="amount_untaxed_signed" string="Untaxed Amount" sum="Total"/>
				<field name="amount_tax_signed" string="Tax Amount" sum="Total"/>
				<field name="amount_total_signed" string="Total" sum="Total"/>
				<field name="credit_note_numbers" string="Credit Note" optional="hide"/>
				<field name="credit_amt" optional="hide" sum="Total"/>
				<field name="amount_diff" sum="Total" optional="hide" string="Salesperson Achieved"/>
				<field name="salesperson_target_amt" string="Salesperson Target Amt"/>
				<field name="company_id" optional="hide"/>

				<field name="paid_amount" />
				<field name="payment_ref" />
				<field name="payment_state"
						   widget="badge"
						   decoration-danger="payment_state == 'not_paid'"
						   decoration-warning="payment_state in ('partial', 'in_payment')"
						   decoration-success="payment_state in ('paid', 'reversed')"
						   attrs="{'invisible': [('payment_state', 'in', ('invoicing_legacy'))]}"
						   optional="show"/>
				<field name="state" invisible='1'/>
			</tree>
		</field>
	</record> -->

<!-- Customer - Target Tracking invoice view -->
	<!-- <record model="ir.ui.view" id="view_out_invoice_tree_inherit_cus_target">
		<field name="name">account.move.tree.inherit.cus.target</field>
		<field name="model">account.move</field>
		<field eval="10" name="priority"/>
		<field name="arch" type="xml">
			<tree string="Invoice view - Customer Target Tracking" create="false" edit="false">
				<field name="name"/>
				<field name="invoice_partner_display_name" string="Customer"/>
				<field name="custom_salesperson_id" string="Salesperson"/>
				<field name="salesperson_target_amt" string="Salesperson Target Amt"/>
				<field name="amount_diff" sum="Total" string="Salesperson Achieved"/>
				<field name="customer_target_amt" string="Customer Target Amt"/>
				<field name="customer_category_id" string="Customer Category" optional="hide"/>
				<field name="invoice_date" string="Invoice Date"/>
				<field name="invoice_date_due" optional="hide"/>
				<field name="invoice_origin" optional="hide" string="Sale Order No"/>
				<field name="amount_untaxed_signed" string="Untaxed Amount" sum="Total" optional="hide"/>
				<field name="amount_tax_signed" string="Tax Amount" sum="Total" optional="hide"/>
				<field name="amount_total_signed" string="Total" sum="Total" optional="hide"/>
				<field name="credit_note_numbers" string="Credit Note" optional="hide"/>
				<field name="credit_amt" optional="hide" sum="Total"/>
				
				
				<field name="company_id" optional="hide"/>
				<field name="paid_amount" optional="hide"/>
				<field name="payment_ref" optional="hide"/>
				<field name="payment_state"
						   widget="badge"
						   decoration-danger="payment_state == 'not_paid'"
						   decoration-warning="payment_state in ('partial', 'in_payment')"
						   decoration-success="payment_state in ('paid', 'reversed')"
						   attrs="{'invisible': [('payment_state', 'in', ('invoicing_legacy'))]}"
						   />
				<field name="state" invisible='1'/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_target_flow_form">
		<field name="name">Target Tracking Form</field>
		<field name="model">target.flow</field>
		<field name="arch" type="xml">
			<form>
				<header>
					<button string="Confirm" 
						name="action_target_confirm" 
						states="draft" 
						type="object" class="oe_highlight" 
						groups="saam_extension.group_target_flow_manager,saam_extension.group_target_flow_admin"/>
					<button string="Reset to Draft" 
						name="action_target_draft" 
						states="cancel" type="object"
						groups="saam_extension.group_target_flow_manager,saam_extension.group_target_flow_admin"/>
					<button string="Cancel" 
						name="action_target_cancel" 
						states="confirm" type="object"
						groups="saam_extension.group_target_flow_manager,saam_extension.group_target_flow_admin"/>
					<field name="state" widget="statusbar" />
				</header>
				<sheet>
						<h1>
                            <field name="name" readonly="1"/>
                        </h1>
					<group>
						<group>
							<field name="custom_salesperson_id" required='1' attrs="{'readonly':[('state','!=','draft')]}" options="{'no_create': True, 'no_edit': True, 'no_open': True}"/>
						</group>
						<group>
							<label for="date_from" string="Period"/>
							<div>
								<div name="date_edit_only" class="o_row oe_edit_only">
									<span>From <field name="date_from" class='oe_inline' attrs="{'readonly':[('state','!=','draft')]}"/></span>
									<span>To <field name="date_to" class='oe_inline' attrs="{'readonly':[('state','!=','draft')]}"/></span>
								</div>
								<div name="date_read_only" class="o_row oe_read_only">
									<span attrs="{'invisible': [('date_from', '=', False)]}">From <field name="date_from" class='oe_inline'/></span>
									<span attrs="{'invisible': [('date_to', '=', False)]}">To <field name="date_to" class='oe_inline'/></span>
								</div>
							</div>
						
							<field name="manager_id" readonly='1' force_save='1'/>
							<field name="linked_user_id" readonly='1' force_save='1' invisible='1'/>
							<field name="company_id" readonly='1' invisible='1'/>
						</group>
						<group>
							<field name="currency_id" invisible="1"/>
							<field name="yearly_target_amt"  attrs="{'readonly':[('state','!=','draft')]}"/>
							<field name="yearly_achieved_amt" />
							<field name="progress" widget="progressbar"  string="Progress"/>
							<button type="object" 
								name="generate_target_line_entries" 
								string="Update Lines"
								icon="fa-arrow-circle-o-right" 
								class="oe_highlight" attrs="{'invisible':[('state','!=','draft')]}"
								groups="saam_extension.group_target_flow_manager,saam_extension.group_target_flow_admin"/>
						</group>
						<group>
							<field name="cancel_reason" attrs="{'readonly':[('state','!=','confirm')],'invisible':[('state','!=','confirm')]}"/>
						</group>

					</group>
					<notebook>
						<page string="Weekly Target Tracking" name="tracking_lines_week">
							<field name="target_tracking_lines_week" attrs="{'readonly':[('state','!=','draft')]}">
								<tree string="Weekly_target_amt Target Tracking" editable="top">
									<field name="custom_salesperson_id" invisible="1"/>
									<field name="date_from"/>
									<field name="date_to"/>
									<field name="currency_id" invisible="1"/>
									<field name="weekly_target_amt" sum="Weekly Target Amount"/>
									<field name="prev_days_target_amt" />
									<field name="end_days_target_amt" invisible='1'/>

									<field name="weekly_achieved_amt" sum="Weekly Achieved Amount"/>
									<field name="progress" widget="progressbar"  string="Progress"/>
									<field name="state" invisible='1'/>
									<button type="object" name="action_open_target_entries_week" string="View Invoice"
											icon="fa-arrow-circle-o-right" />
								</tree>
							</field>
						</page>
						<page string="Monthly Target Tracking" name="tracking_lines">
							<field name="target_tracking_lines" readonly='1'>
								<tree string="Monthly Target Tracking" editable="top">
									<field name="custom_salesperson_id" invisible="1"/>
									<field name="date_from"/>
									<field name="date_to"/>
									<field name="currency_id" invisible="1"/>                                    
									<field name="monthly_target_amt" sum="Monthly Target Amount"/>
									<field name="monthly_achieved_amt" sum="Monthly Achieved Amount"/>
									<field name="progress" widget="progressbar" string="Progress" />
									<field name="state" invisible='1'/>
									<button type="object" name="action_open_target_entries_month" string="View Invoice"
										icon="fa-arrow-circle-o-right" />
								</tree>
							</field>
						</page>						
					</notebook>
				</sheet>
				<div class="oe_chatter">
					<field name="activity_ids"/>
					<field name="message_ids"/>
				</div>
			</form>
		</field>
	</record> -->

	<!-- <record model="ir.ui.view" id="view_target_flow_tree">
		<field name="name">Target Tracking Tree</field>
		<field name="model">target.flow</field>
		<field name="arch" type="xml">
			<tree>
				<field name="name"/>
				<field name="custom_salesperson_id" options="{'no_create': True, 'no_edit': True, 'no_open': True}" />
				<field name="manager_id" options="{'no_create': True, 'no_edit': True, 'no_open': True}" />
				<field name="linked_user_id" options="{'no_create': True, 'no_edit': True, 'no_open': True}" />
				<field name="state"
						   widget="badge"
						   decoration-warning="state in ('draft')"
						   decoration-success="state in ('confirm')"/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_target_flow_search">
		<field name="name">Target Tracking Search</field>
		<field name="model">target.flow</field>
		<field name="arch" type="xml">
			<search>
				<field name="custom_salesperson_id" string="Custom Salesperson"/>
				<field name="manager_id" string="Manager"/>
				<field name="linked_user_id" string="Linked User"/>
			</search>
		</field>
	</record> -->

	<!-- <record id="action_target_flow_menu" model="ir.actions.act_window">
		<field name="name">Target Tracking</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">target.flow</field>
		<field name="view_mode">tree,form</field>
	</record>
 -->
	<!-- SAMM Salesperson Menuitem -->
	<!-- <menuitem 
		id="target_flow_menu"
		name="Target Tracking"
		parent="sale.sale_order_menu"
		action="action_target_flow_menu"
		groups="saam_extension.group_target_flow_user,saam_extension.group_target_flow_manager,saam_extension.group_target_flow_admin"
		sequence="5"/> -->

</odoo>
